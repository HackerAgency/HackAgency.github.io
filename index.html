<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Клан ОкЪ - Легенда Хакеров</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* Стили для изображений союзников */
        /* Общие стили для союзников */
        .ally-card {
            text-align: center;
            margin: 20px 0;
        }
        
        .ally-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .ally-photo {
            width: 300px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        .ally-photo:hover {
            transform: scale(1.05);
        }
        
        .ally-description {
            font-size: 1rem;
            margin-bottom: 20px;
        }
        
        .ally-bio {
            font-size: 1.2rem;
            text-align: left;
            margin-top: 20px;
        }

        /* Адаптивность для мобильных устройств */
        @media (max-width: 768px) {
            .ally-photo {
                width: 100%;
                max-width: 300px;
            }
        
            .gallery-item {
                width: 100%;
                max-width: 300px;
            }
        
            .gallery-photo {
                width: 100%;
                max-width: 200px;
            }
}


        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e6e6e6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: background-color 0.3s ease;
        }

        /* Снег */
        .snowflake {
            position: absolute;
            top: -20px;
            color: #fff;
            font-size: 1.2rem;
            animation: fall linear forwards;
            user-select: none;
            z-index: 1;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }

        @keyframes fall {
            to {
                transform: translateY(105vh) translateX(20px);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        header {
            text-align: center;
            padding: 40px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .subtitle {
            font-size: 1.5rem;
            color: #a0a0c0;
            margin-bottom: 20px;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 30px;
            color: #fff;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .tab-btn:hover {
            background: rgba(78, 205, 196, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }

        .tab-content {
            display: none;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .member-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .member-card:hover {
            transform: translateY(-5px);
            background: rgba(78, 205, 196, 0.1);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.3);
        }

        .member-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #4ecdc4;
        }

        .member-content {
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px 20px;
            text-align: center;
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }

        .game-card:hover::before {
            left: 100%;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.03);
            background: rgba(255, 107, 107, 0.15);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
        }

        .game-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
        }

        .game-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #ff6b6b;
            font-weight: bold;
        }

        .game-desc {
            font-size: 0.95rem;
            color: #a0a0c0;
            line-height: 1.5;
        }

        .quote {
            font-style: italic;
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            border-left: 4px solid #4ecdc4;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0 15px 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a0a0c0;
        }

        /* Настройки в левом нижнем углу */
        .settings-corner {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        .settings-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .settings-button:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.5);
        }

        .settings-button i {
            font-size: 1.5rem;
            color: white;
        }

        /* Модальное окно настроек */
        .settings-modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .settings-modal-content {
            background: rgba(26, 26, 46, 0.95);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            backdrop-filter: blur(15px);
            max-height: 80vh;
            overflow-y: auto;
        }

        .light-theme .settings-modal-content {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-theme .settings-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .settings-title {
            font-size: 1.8rem;
            color: #4ecdc4;
            margin: 0;
        }

        .close-settings {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-settings:hover {
            color: #ff6b6b;
        }

        .light-theme .close-settings {
            color: #999;
        }

        .light-theme .close-settings:hover {
            color: #ff6b6b;
        }

        .settings-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-theme .settings-section {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .settings-section h3 {
            color: #4ecdc4;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .setting-item {
            margin-bottom: 20px;
        }

        .setting-label {
            display: block;
            margin-bottom: 8px;
            color: #a0a0c0;
            font-weight: 500;
        }

        .light-theme .setting-label {
            color: #666;
        }

        .setting-control {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1rem;
        }

        .light-theme .setting-control {
            background: rgba(0, 0, 0, 0.05);
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .range-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }

        .light-theme .range-slider {
            background: rgba(0, 0, 0, 0.1);
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ecdc4;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }

        .range-value {
            display: inline-block;
            margin-left: 15px;
            color: #4ecdc4;
            font-weight: bold;
            min-width: 30px;
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: inline-block;
            margin-left: 15px;
            vertical-align: middle;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .theme-preview {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .theme-option {
            width: 80px;
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .theme-option:hover {
            transform: scale(1.05);
            border-color: #4ecdc4;
        }

        .theme-option.active {
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }

        .avatar-preview {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto;
            font-weight: bold;
            color: white;
            font-size: 2rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .image-upload {
            display: block;
            margin: 15px auto;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .light-theme .image-upload {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .image-upload:hover {
            background: rgba(78, 205, 196, 0.3);
        }

        .save-settings-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .save-settings-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.5);
        }

        /* Модальное окно игры */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(26, 26, 46, 0.95);
            margin: 3% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            backdrop-filter: blur(15px);
            animation: modalSlideIn 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        .light-theme .modal-content {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            position: absolute;
            right: 20px;
            top: 15px;
            z-index: 1001;
        }

        .close:hover {
            color: #ff6b6b;
        }

        .light-theme .close {
            color: #999;
        }

        .light-theme .close:hover {
            color: #ff6b6b;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .light-theme .modal-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .modal-title {
            font-size: 2rem;
            color: #4ecdc4;
            margin: 0;
            padding-right: 40px;
        }

        .light-theme .modal-title {
            color: #4ecdc4;
        }

        .modal-body {
            padding: 20px 0;
        }

        .game-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .light-theme .game-container {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 10px;
            margin: 25px auto;
            justify-content: center;
            justify-items: center;
        }

        .game-cell {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .light-theme .game-cell {
            background: rgba(0, 0, 0, 0.05);
            border: 3px solid rgba(0, 0, 0, 0.2);
            color: #333;
        }

        .game-cell:hover {
            background: rgba(78, 205, 196, 0.3);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }

        .game-info {
            text-align: center;
            margin: 25px 0;
            font-size: 1.4rem;
            font-weight: bold;
            color: #4ecdc4;
            text-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
        }

        .light-theme .game-info {
            color: #4ecdc4;
        }

        .game-controls {
            text-align: center;
            margin: 25px 0;
        }

        .game-btn {
            padding: 12px 25px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 30px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 0 12px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.5);
        }

        .snake-board {
            display: grid;
            grid-template-columns: repeat(20, 15px);
            grid-template-rows: repeat(20, 15px);
            gap: 1px;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            margin: 25px auto;
            padding: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 320px;
        }

        .light-theme .snake-board {
            background: rgba(0, 0, 0, 0.05);
            border: 3px solid rgba(0, 0, 0, 0.2);
        }

        .snake-cell {
            width: 15px;
            height: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
        }

        .light-theme .snake-cell {
            background: rgba(0, 0, 0, 0.05);
        }

        .snake-head {
            background: linear-gradient(45deg, #4ecdc4, #45b7aa);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }

        .snake-body {
            background: linear-gradient(45deg, #45b7aa, #3da59a);
            box-shadow: 0 0 5px rgba(69, 183, 170, 0.3);
        }

        .snake-food {
            background: linear-gradient(45deg, #ff6b6b, #ff5252);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
            max-width: 400px;
            margin: 25px auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .light-theme .memory-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.02));
            border: 2px solid rgba(0, 0, 0, 0.2);
            color: #333;
        }

        .memory-card:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(78, 205, 196, 0.4);
        }

        .memory-card.flipped {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.3), rgba(69, 183, 170, 0.2));
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.6), rgba(69, 183, 170, 0.4));
            transform: scale(0.95);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }

        .breakout-canvas {
            background: rgba(0, 0, 0, 0.4);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            margin: 25px auto;
            display: block;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            max-width: 100%;
        }

        .light-theme .breakout-canvas {
            background: rgba(0, 0, 0, 0.1);
            border: 3px solid rgba(0, 0, 0, 0.2);
        }

        /* Стили для комментариев */
        .comments-section {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .light-theme .comments-section {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .comments-title {
            font-size: 2rem;
            color: #4ecdc4;
            margin-bottom: 20px;
            text-align: center;
        }

        .light-theme .comments-title {
            color: #4ecdc4;
        }

        .comment-form {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-theme .comment-form {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            color: #a0a0c0;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1rem;
        }

        .form-textarea {
            height: 100px;
            resize: vertical;
        }

        .submit-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }

        .comments-list {
            margin-top: 30px;
        }

        .comment {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comment-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            cursor: pointer;
        }

        .comment-author {
            font-weight: bold;
            color: #4ecdc4;
            margin-right: 10px;
        }

        .comment-date {
            color: #a0a0c0;
            font-size: 0.9rem;
        }

        .comment-text {
            line-height: 1.6;
        }

        .no-comments {
            text-align: center;
            color: #a0a0c0;
            font-style: italic;
            padding: 30px;
        }

        .light-theme .no-comments {
            color: #999;
        }

        /* Стили для выбора режима игры */
        .mode-selection {
            text-align: center;
            margin: 20px 0;
        }

        .mode-btn {
            padding: 10px 20px;
            margin: 5px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .light-theme .mode-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: #333;
        }

        .mode-btn:hover {
            background: rgba(78, 205, 196, 0.3);
        }

        .mode-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }

        /* Новые игры */
        .new-game-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        /* Темы */
        .theme-blue {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%) !important;
        }

        .theme-green {
            background: linear-gradient(135deg, #0f4c3a 0%, #1a5d4a 50%, #2a7d6a 100%) !important;
        }

        .theme-purple {
            background: linear-gradient(135deg, #4b0082 0%, #6a0dad 50%, #8a2be2 100%) !important;
        }

        .theme-orange {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffb74d 100%) !important;
        }

        .theme-pink {
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 50%, #ff69b4 100%) !important;
        }

        .theme-light-blue {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%) !important;
        }

        .theme-light-green {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 50%, #a5d6a7 100%) !important;
        }

        .theme-light-purple {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 50%, #ce93d8 100%) !important;
        }

        .theme-light-orange {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 50%, #ffcc80 100%) !important;
        }

        .theme-light-pink {
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 50%, #f48fb1 100%) !important;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .game-cell {
                width: 80px;
                height: 80px;
                font-size: 2.5rem;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px 15px;
                margin: 2% auto;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }
            
            .game-board {
                grid-template-columns: repeat(3, 80px);
                grid-template-rows: repeat(3, 80px);
            }
            
            .snake-board {
                grid-template-columns: repeat(20, 12px);
                grid-template-rows: repeat(20, 12px);
                max-width: 260px;
            }
            
            .snake-cell {
                width: 12px;
                height: 12px;
            }
            
            .settings-modal-content {
                width: 95%;
                margin: 10% auto;
            }
        }
    </style>

<style>
/* 3D кнопки */
button, .submit-btn, .game-btn {
    box-shadow: 0 4px 0 #333;
    transition: all 0.15s ease;
}
button:active, .submit-btn:active, .game-btn:active {
    transform: translateY(2px);
    box-shadow: 0 1px 0 #333;
}

/* Настройки анимации панели */
.settings-modal-content {
    animation: slideUp 0.4s ease;
}
@keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Анимированный фон (звезды) */
#starsCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    background: transparent;
    pointer-events: none;
}
</style>
<canvas id="starsCanvas"></canvas>
    <script src="https://giscus.app/client.js"
        data-repo="HackerAgency/HackAgency.github.io"
        data-repo-id="R_kgDOI..."
        data-category="General"
        data-category-id="DIC_kwDOI..."
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang="ru"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
<script>
// Простой фон звезды
const canvas = document.getElementById('starsCanvas');
const ctx = canvas.getContext('2d');
let stars = [];

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

for (let i = 0; i < 100; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        d: Math.random() * 1
    });
}

function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#ffffff";
    ctx.shadowBlur = 5;
    ctx.shadowColor = "#ffffff";
    stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2, true);
        ctx.fill();
    });
    moveStars();
}
function moveStars() {
    stars.forEach(s => {
        s.y += s.d;
        if (s.y > canvas.height) {
            s.y = 0;
            s.x = Math.random() * canvas.width;
        }
    });
}
setInterval(drawStars, 30);
</script>

</head>
<body>
    <!-- Снег -->
    <div id="snow-container"></div>

    <!-- Настройки в левом нижнем углу -->
    <div class="settings-corner">
        <div class="settings-button" onclick="openSettingsModal()">
            <i class="fas fa-cog"></i>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Клан ОкЪ</h1>
            <p class="subtitle">Легенда хакеров, которую мы всегда будем помнить</p>
        </header>

        <div class="nav-tabs">
    <button class="tab-btn active" onclick="showTab('story')">История</button>
    <button class="tab-btn" onclick="showTab('members')">Члены Клана</button>
    <button class="tab-btn" onclick="showTab('games')">Игры</button>
    <button class="tab-btn" onclick="showTab('memories')">Воспоминания</button>
    <button class="tab-btn" onclick="showTab('allies')">Союзники</button>
</div>



        <div id="story" class="tab-content active">
            <div class="member-card">
                <h2 class="member-title">Начало Великого Пути</h2>
                <p class="member-content">
                    Группа юных заряженных пацанов, мечтавших стать настоящими хакерами. 
                    Их цель была проста - покорить цифровой мир и оставить свой след в истории.
                </p>
            </div>
            
            <div class="quote">
                "Мы больше не увидимся, но я не хочу уходить... 
                Мы будем помнить друг друга всегда..."
            </div>
        </div>

        <div id="members" class="tab-content">
            <div class="member-card">
                <h2 class="member-title">ОкЪ 1.0 - Глава</h2>
                <p class="member-content">
                    Первый участник клана. Начала легенды и его основатель.
                </p>
            </div>

            <div class="member-card">
                <h2 class="member-title">ОкЪ 2.0 - Главный Капсер</h2>
                <p class="member-content">
                    Второй участник, который продолжил дело первого. 
                    Главный Капсер в мире. 
                </p>
            </div>

            <div class="member-card">
                <h2 class="member-title">ОкЪ 3.0 - Нейронный Эксперт</h2>
                <p class="member-content">
                    Специалист по нейросетям и искусственному интеллекту. 
                    Его знания и опыт в этой области были бесценны для всего клана.
                </p>
            </div>

            <div class="member-card">
                <h2 class="member-title">ОкЪ 4.0 - Наш Танк</h2>
                <p class="member-content">
                    Мощный участник, который держал удар и защищал слабых. 
                    Его прочность и надежность были примером для всех остальных.
                </p>
            </div>

            <div class="member-card">
                <h2 class="member-title">ОкЪ 5.0 - Судья Тринадцати</h2>
                <p class="member-content">
                    Самый крутой из всех. За свои подвиги по блокировке 13 скамеров получил заслуженное звание. 
                    Его действия защитили не только клан, но и всех пользователей сети.
                </p>
            </div>

            <div class="member-card">
                <h2 class="member-title">ОкЪ 8.0 - Движение Вперед</h2>
                <p class="member-content">
                    Последний участник, символизирующий наше движение вперед. 
                    Мы помним всех, кто был с нами на этом пути. 
                    Клан ОкЪ живет в наших сердцах и продолжает вдохновлять новое поколение.
                </p>
            </div>
        </div>

        <div id="games" class="tab-content">
            <h2 style="text-align: center; margin-bottom: 30px; color: #4ecdc4;">Игры Клана</h2>
            
            <div class="games-grid">
                <div class="game-card" onclick="openGameModal('ticTacToe')">
                    <div class="game-icon">⭕</div>
                    <h3 class="game-title">Крестики-Нолики</h3>
                    <p class="game-desc">Классическая игра против ИИ с красивой анимацией</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('snake')">
                    <div class="game-icon">🐍</div>
                    <h3 class="game-title">Змейка</h3>
                    <p class="game-desc">Классическая змейка с современным дизайном и эффектами</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('memory')">
                    <div class="game-icon">🧠</div>
                    <h3 class="game-title">Память</h3>
                    <p class="game-desc">Найди пары карточек за минимальное время с анимацией</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('breakout')">
                    <div class="game-icon">🧱</div>
                    <h3 class="game-title">Арканоид</h3>
                    <p class="game-desc">Разбей все блоки ракеткой с эффектами взрыва</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('pong')">
                    <div class="game-icon">🏓</div>
                    <h3 class="game-title">Понг</h3>
                    <p class="game-desc">Классический теннис для двух игроков с частицами</p>
                </div>
                
                <!-- Новые игры -->
                <div class="game-card" onclick="openGameModal('tetris')">
                    <div class="game-icon">🧩</div>
                    <h3 class="game-title">Тетрис</h3>
                    <p class="game-desc">Собирайте линии и получайте очки</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('minesweeper')">
                    <div class="game-icon">💣</div>
                    <h3 class="game-title">Сапер</h3>
                    <p class="game-desc">Найдите все мины, не взорвавшись</p>
                </div>
                
                <div class="game-card" onclick="openGameModal('spaceInvaders')">
                    <div class="game-icon">👾</div>
                    <h3 class="game-title">Космические захватчики</h3>
                    <p class="game-desc">Уничтожьте вражеские корабли</p>
                </div>
            </div>
        </div>

        <div id="memories" class="tab-content">
            <div class="member-card">
                <h2 class="member-title">Вечная Память</h2>
                <p class="member-content">
                    Мы двигаемся вперед, но никогда не забудем тех, кто был с нами в самом начале. 
                    Группа юных заряженных пацанов, которые мечтали стать хакерами - 
                    это наше прошлое, наше настоящее и наше будущее.
                </p>
            </div>
            
            <div class="quote">
                "Мы будем помнить друг друга всегда... 
                Я не хочу уходить, но путь продолжается. 
                Клан ОкЪ жив!"
            </div>
        </div>

        <!-- Секция комментариев -->
            <div id="comments" class="tab-content">
    <h2 style="text-align: center; margin-bottom: 30px; color: #4ecdc4;">Комментарии</h2>
    <div id="giscus-container"></div>
    
    <script src="https://giscus.app/client.js"
            data-repo="HackerAgency/HackAgency.github.io"
            data-repo-id="R_kgDOI..."
            data-category="General"
            data-category-id="DIC_kwDOI..."
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="dark"
            data-lang="ru"
            data-loading="lazy"
            crossorigin="anonymous"
            async>
    </script>
</div>

        <footer>
            <p>Клан ОкЪ © 2025 - Легенда, которую мы всегда вспомним</p>
        </footer>
    </div>

    <div id="links" class="tab-content">
        <h2 style="text-align: center; margin-bottom: 30px; color: #4ecdc4;">Ссылки</h2>
        <p><strong>Сервер Устаза по информатике Адама Алиева Рустамовича:</strong></p>
        <ul>
            <li><strong>IP-адрес:</strong> 135.181.126.185:25622</li>
            <li><strong>Версия:</strong> 1.21.5</li>
            <li><strong>Требования для входа:</strong>
                <ul>
                    <li>Игрок должен быть мусульманином.</li>
                    <li>Для доступа нужно написать Устазу в Telegram: <a href="https://t.me/adammaverick">@adammaverick</a>.</li>
                </ul>
            </li>
        </ul>
    </div>

    <div id="allies" class="tab-content active">
    <div class="ally-card">
        <h2 class="ally-title" style="
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.3);">
            Наш Учитель Информатики
        </h2>

        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-bottom: 20px;">
            <img src="https://raw.githubusercontent.com/HackerAgency/HackAgency.github.io/refs/heads/main/sticker4.webp" class="ally-photo">
            <img src="https://raw.githubusercontent.com/HackerAgency/HackAgency.github.io/refs/heads/main/sticker2.webp" class="ally-photo">
            <img src="https://github.com/HackerAgency/HackAgency.github.io/blob/main/photo_2024-03-30_03-52-58.jpg?raw=true" class="ally-photo">
            <img src="https://raw.githubusercontent.com/HackerAgency/HackAgency.github.io/refs/heads/main/sticker.webp" class="ally-photo">
        </div>

        <div style="
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            max-width: 700px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);">

            <p style="font-size: 1.2rem; margin-bottom: 15px;">
                <strong>Имя:</strong> Адам Алиев Рустамович
            </p>
            <p style="font-size: 1.2rem; margin-bottom: 15px;">
                <strong>Возраст:</strong> 25 лет &nbsp;|&nbsp; <strong>Рост:</strong> 190 см
            </p>
            <p style="font-size: 1.2rem; margin-bottom: 15px;">
                <strong>Telegram:</strong> <a href="https://t.me/adammaverick" target="_blank" style="color: #4ecdc4;">@adammaverick</a>
            </p>
            <p style="font-size: 1.2rem;">
                <strong>Сервер Minecraft:</strong><br>
                ⛏⛏⛏⛏ IP: <code style="color:#ff6b6b;">135.181.126.185:25622</code><br>
                Версия: <strong>1.21.5 (Forge)</strong> — поддержка чужих скинов
            </p>
        </div>
    </div>
</div>

    
    <!-- Модальное окно настроек -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-modal-content">
            <div class="settings-header">
                <h2 class="settings-title">Настройки</h2>
                <span class="close-settings" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Профиль -->
                <div class="settings-section">
                    <h3>Профиль</h3>
                    <div class="setting-item">
                        <label class="setting-label">Ваш ник:</label>
                        <input type="text" id="settingsProfileName" class="setting-control" placeholder="Введите ваш ник">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Аватар (первая буква):</label>
                        <input type="text" id="settingsProfileAvatar" class="setting-control" placeholder="Введите первую букву ника" maxlength="1">
                    </div>
                    <div class="avatar-preview" id="settingsAvatarPreview">U</div>
                    <label class="image-upload">
                        <input type="file" id="avatarUpload" accept="image/*" style="display: none;" onchange="previewAvatar(event)">
                        Загрузить изображение
                    </label>
                    <div id="avatarImagePreview" style="text-align: center; margin-top: 15px;"></div>
                </div>

                <!-- Темы -->
                <div class="settings-section">
                    <h3>Темы</h3>
                    <div class="setting-item">
                        <label class="setting-label">Основная тема:</label>
                        <select id="mainTheme" class="setting-control">
                            <option value="dark">Темная</option>
                            <option value="light">Светлая</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Цветовая схема:</label>
                        <div class="theme-preview">
                            <div class="theme-option theme-blue active" data-theme="blue" onclick="selectTheme('blue')"></div>
                            <div class="theme-option theme-green" data-theme="green" onclick="selectTheme('green')"></div>
                            <div class="theme-option theme-purple" data-theme="purple" onclick="selectTheme('purple')"></div>
                            <div class="theme-option theme-orange" data-theme="orange" onclick="selectTheme('orange')"></div>
                            <div class="theme-option theme-pink" data-theme="pink" onclick="selectTheme('pink')"></div>
                        </div>
                    </div>
                </div>

                <!-- Снег -->
                <div class="settings-section">
                    <h3>Снег</h3>
                    <div class="setting-item">
                        <label class="setting-label">Количество снежинок: <span id="snowCountValue" class="range-value">5</span></label>
                        <input type="range" id="snowCount" class="range-slider" min="0" max="50" value="5">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Размер снежинок: <span id="snowSizeValue" class="range-value">1.2</span>rem</label>
                        <input type="range" id="snowSize" class="range-slider" min="5" max="30" value="12">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Скорость падения: <span id="snowSpeedValue" class="range-value">10</span>сек</label>
                        <input type="range" id="snowSpeed" class="range-slider" min="1" max="30" value="10">
                    </div>
                </div>

                <!-- Дизайн -->
                <div class="settings-section">
                    <h3>Дизайн</h3>
                    <div class="setting-item">
                        <label class="setting-label">Радиус скругления: <span id="borderRadiusValue" class="range-value">15</span>px</label>
                        <input type="range" id="borderRadius" class="range-slider" min="0" max="30" value="15">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Интенсивность теней: <span id="shadowIntensityValue" class="range-value">0.3</span></label>
                        <input type="range" id="shadowIntensity" class="range-slider" min="0" max="10" value="3">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Прозрачность элементов: <span id="opacityValue" class="range-value">0.4</span></label>
                        <input type="range" id="opacity" class="range-slider" min="1" max="10" value="4">
                    </div>
                </div>

                
<!-- Визуальные эффекты -->

<!-- Переключатель дизайна -->


<!-- Кнопка таблицы лидеров -->

<button class="save-settings-btn" onclick="saveSettings()">Сохранить настройки</button>
            </div>
        </div>
    </div>

    <!-- Модальные окна игр -->
    <!-- Крестики-Нолики -->
    <div id="ticTacToeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('ticTacToe')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Крестики-Нолики</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="mode-selection">
                        <button class="mode-btn active" onclick="setTicTacToeMode('ai')">Против ИИ</button>
                        <button class="mode-btn" onclick="setTicTacToeMode('pvp')">Два игрока</button>
                    </div>
                    <div class="game-info" id="ticTacToeInfo">Ваш ход: X</div>
                    <div class="game-board" id="ticTacToeBoard"></div>
                    <div class="game-controls">
                        <button class="game-btn" onclick="resetTicTacToe()">Новая игра</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Змейка -->
    <div id="snakeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('snake')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Змейка</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="snakeInfo">Счет: 0</div>
                    <div class="snake-board" id="snakeBoard"></div>
                    <div class="game-controls">
                        <button class="game-btn" onclick="startSnake()">Старт</button>
                        <button class="game-btn" onclick="resetSnake()">Сброс</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        Управление: стрелки клавиатуры
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Память -->
    <div id="memoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('memory')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Игра Памяти</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="memoryInfo">Найдено пар: 0/8</div>
                    <div class="memory-grid" id="memoryGrid"></div>
                    <div class="game-controls">
                        <button class="game-btn" onclick="resetMemory()">Новая игра</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Арканоид -->
    <div id="breakoutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('breakout')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Арканоид</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="breakoutInfo">Счет: 0 | Жизни: 3</div>
                    <canvas id="breakoutCanvas" width="600" height="400" class="breakout-canvas"></canvas>
                    <div class="game-controls">
                        <button class="game-btn" onclick="startBreakout()">Старт</button>
                        <button class="game-btn" onclick="resetBreakout()">Сброс</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        Управление: стрелки влево/вправо
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Понг -->
    <div id="pongModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('pong')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Понг</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="mode-selection">
                        <button class="mode-btn active" onclick="setPongMode('ai')">Против ИИ</button>
                        <button class="mode-btn" onclick="setPongMode('pvp')">Два игрока</button>
                    </div>
                    <div class="game-info" id="pongInfo">Игрок 1: 0 | Игрок 2: 0</div>
                    <canvas id="pongCanvas" width="600" height="400" class="breakout-canvas"></canvas>
                    <div class="game-controls">
                        <button class="game-btn" onclick="startPong()">Старт</button>
                        <button class="game-btn" onclick="resetPong()">Сброс</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        Игрок 1: W/S | Игрок 2: ↑/↓
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Тетрис -->
    <div id="tetrisModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('tetris')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Тетрис</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="tetrisInfo">Счет: 0 | Уровень: 1</div>
                    <canvas id="tetrisCanvas" width="300" height="600" class="breakout-canvas"></canvas>
                    <div class="game-controls">
                        <button class="game-btn" onclick="startTetris()">Старт</button>
                        <button class="game-btn" onclick="resetTetris()">Сброс</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        Управление: A/D - движение, S - ускорение, Q/E - поворот
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Сапер -->
    <div id="minesweeperModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('minesweeper')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Сапер</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="minesweeperInfo">Мины: 10 | Флаги: 0</div>
                    <div class="snake-board" id="minesweeperBoard" style="max-width: 400px; grid-template-columns: repeat(10, 30px); grid-template-rows: repeat(10, 30px);"></div>
                    <div class="game-controls">
                        <button class="game-btn" onclick="resetMinesweeper()">Новая игра</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        ЛКМ - открыть, ПКМ - флаг
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Космические захватчики -->
    <div id="spaceInvadersModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('spaceInvaders')">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Космические захватчики</h2>
            </div>
            <div class="modal-body">
                <div class="game-container">
                    <div class="game-info" id="spaceInvadersInfo">Счет: 0 | Жизни: 3</div>
                    <canvas id="spaceInvadersCanvas" width="600" height="400" class="breakout-canvas"></canvas>
                    <div class="game-controls">
                        <button class="game-btn" onclick="startSpaceInvaders()">Старт</button>
                        <button class="game-btn" onclick="resetSpaceInvaders()">Сброс</button>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: #a0a0c0; font-size: 0.9rem;">
                        Управление: стрелки влево/вправо, пробел - выстрел
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://utteranc.es/client.js"
        repo="HackerAgency/HackAgency.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
    </script>
    <script>
        function showTab(tabId) {
            // Скрыть все вкладки
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Убрать активный класс у кнопок
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Показать выбранную вкладку
            document.getElementById(tabId).classList.add('active');

            // Добавить активный класс кнопке
            document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
        }
    </script>
    <script>
        // Настройки по умолчанию
        let userSettings = JSON.parse(localStorage.getItem('okUserSettings')) || {
            profile: {
                name: 'Гость',
                avatar: 'Г',
                avatarImage: null
            },
            theme: {
                main: 'dark',
                color: 'blue'
            },
            snow: {
                count: 5,
                size: 12,
                speed: 10
            },
            design: {
                borderRadius: 15,
                shadowIntensity: 3,
                opacity: 4
            }
        };

        // Создание снега
        function createSnow() {
            const snowContainer = document.getElementById('snow-container');
            snowContainer.innerHTML = '';
            
            const snowCount = userSettings.snow.count;
            
            for (let i = 0; i < snowCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.innerHTML = '❄';
                snowflake.classList.add('snowflake');
                
                // Случайные параметры
                const startLeft = Math.random() * 100;
                const animationDuration = userSettings.snow.speed + Math.random() * userSettings.snow.speed;
                const animationDelay = Math.random() * 5;
                const opacity = 0.3 + Math.random() * 0.7;
                const fontSize = userSettings.snow.size / 10 + 'rem';
                
                snowflake.style.left = startLeft + 'vw';
                snowflake.style.animationDuration = animationDuration + 's';
                snowflake.style.animationDelay = animationDelay + 's';
                snowflake.style.opacity = opacity;
                snowflake.style.fontSize = fontSize;
                
                snowContainer.appendChild(snowflake);
                
                // Удаление снежинки после завершения анимации
                setTimeout(() => {
                    if (snowflake.parentNode) {
                        snowflake.remove();
                        createSingleSnow();
                    }
                }, animationDuration * 1000);
            }
        }
        
        // Создание одной снежинки
        function createSingleSnow() {
            const snowContainer = document.getElementById('snow-container');
            const snowflake = document.createElement('div');
            snowflake.innerHTML = '❄';
            snowflake.classList.add('snowflake');
            
            const startLeft = Math.random() * 100;
            const animationDuration = userSettings.snow.speed + Math.random() * userSettings.snow.speed;
            const opacity = 0.3 + Math.random() * 0.7;
            const fontSize = userSettings.snow.size / 10 + 'rem';
            
            snowflake.style.left = startLeft + 'vw';
            snowflake.style.animationDuration = animationDuration + 's';
            snowflake.style.opacity = opacity;
            snowflake.style.fontSize = fontSize;
            
            snowContainer.appendChild(snowflake);
            
            setTimeout(() => {
                if (snowflake.parentNode) {
                    snowflake.remove();
                    createSingleSnow();
                }
            }, animationDuration * 1000);
        }
        
        // Переключение вкладок
        function showTab(tabId) {
            // Скрыть все вкладки
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Убрать активный класс у кнопок
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Показать выбранную вкладку
            document.getElementById(tabId).classList.add('active');
            
            // Добавить активный класс кнопке
            event.target.classList.add('active');
        }
        
        // Открытие модального окна игры
        function openGameModal(gameId) {
            // Скрыть все вкладки
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Показать вкладку игр
            document.getElementById('games').classList.add('active');
            
            // Открыть модальное окно
            document.getElementById(gameId + 'Modal').style.display = 'block';
            
            // Инициализировать игру
            switch(gameId) {
                case 'ticTacToe':
                    initTicTacToe();
                    break;
                case 'snake':
                    initSnake();
                    break;
                case 'memory':
                    initMemory();
                    break;
                case 'breakout':
                    initBreakout();
                    break;
                case 'pong':
                    initPong();
                    break;
                case 'tetris':
                    initTetris();
                    break;
                case 'minesweeper':
                    initMinesweeper();
                    break;
                case 'spaceInvaders':
                    initSpaceInvaders();
                    break;
            }
        }
        
        // Закрытие модального окна
        function closeModal(gameId) {
            document.getElementById(gameId + 'Modal').style.display = 'none';
        }
        
        // Открытие модального окна настроек
        function openSettingsModal() {
            document.getElementById('settingsModal').style.display = 'block';
            loadSettingsToForm();
        }
        
        // Закрытие модального окна настроек
        function closeSettingsModal() {
            document.getElementById('settingsModal').style.display = 'none';
        }
        
        // Загрузка настроек в форму
        function loadSettingsToForm() {
            // Профиль
            document.getElementById('settingsProfileName').value = userSettings.profile.name;
            document.getElementById('settingsProfileAvatar').value = userSettings.profile.avatar;
            document.getElementById('settingsAvatarPreview').innerHTML = userSettings.profile.avatar;
            
            // Темы
            document.getElementById('mainTheme').value = userSettings.theme.main;
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`.theme-option.theme-${userSettings.theme.color}`).classList.add('active');
            
            // Снег
            document.getElementById('snowCount').value = userSettings.snow.count;
            document.getElementById('snowCountValue').textContent = userSettings.snow.count;
            document.getElementById('snowSize').value = userSettings.snow.size;
            document.getElementById('snowSizeValue').textContent = (userSettings.snow.size / 10).toFixed(1);
            document.getElementById('snowSpeed').value = userSettings.snow.speed;
            document.getElementById('snowSpeedValue').textContent = userSettings.snow.speed;
            
            // Дизайн
            document.getElementById('borderRadius').value = userSettings.design.borderRadius;
            document.getElementById('borderRadiusValue').textContent = userSettings.design.borderRadius;
            document.getElementById('shadowIntensity').value = userSettings.design.shadowIntensity;
            document.getElementById('shadowIntensityValue').textContent = (userSettings.design.shadowIntensity / 10).toFixed(1);
            document.getElementById('opacity').value = userSettings.design.opacity;
            document.getElementById('opacityValue').textContent = (userSettings.design.opacity / 10).toFixed(1);
        }
        
        // Предварительный просмотр аватара
        function previewAvatar(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.width = '100px';
                    img.style.height = '100px';
                    img.style.borderRadius = '50%';
                    img.style.objectFit = 'cover';
                    document.getElementById('avatarImagePreview').innerHTML = '';
                    document.getElementById('avatarImagePreview').appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        }
        
        // Выбор темы
        function selectTheme(theme) {
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        // Сохранение настроек
        function saveSettings() {
            // Профиль
            userSettings.profile.name = document.getElementById('settingsProfileName').value || 'Гость';
            userSettings.profile.avatar = document.getElementById('settingsProfileAvatar').value || 'Г';
            
            // Темы
            userSettings.theme.main = document.getElementById('mainTheme').value;
            const activeTheme = document.querySelector('.theme-option.active');
            if (activeTheme) {
                userSettings.theme.color = activeTheme.dataset.theme;
            }
            
            // Снег
            userSettings.snow.count = parseInt(document.getElementById('snowCount').value);
            userSettings.snow.size = parseInt(document.getElementById('snowSize').value);
            userSettings.snow.speed = parseInt(document.getElementById('snowSpeed').value);
            
            // Дизайн
            userSettings.design.borderRadius = parseInt(document.getElementById('borderRadius').value);
            userSettings.design.shadowIntensity = parseInt(document.getElementById('shadowIntensity').value);
            userSettings.design.opacity = parseInt(document.getElementById('opacity').value);
            
            // Сохранение в localStorage
            localStorage.setItem('okUserSettings', JSON.stringify(userSettings));
            
            // Применение настроек
            applySettings();
            
            // Закрытие модального окна
            closeSettingsModal();
            
            alert('Настройки сохранены!');
        }
        
        // Применение настроек
        function applySettings() {
            // Тема
            document.body.className = '';
            if (userSettings.theme.main === 'light') {
                document.body.classList.add('light-theme');
            }
            document.body.classList.add(`theme-${userSettings.theme.color}`);
            
            // Снег
            createSnow();
            
            // Дизайн
            updateDesignStyles();
            
            // Профиль
            document.getElementById('commentName').value = userSettings.profile.name;
        }
        
        // Обновление стилей дизайна
        function updateDesignStyles() {
            // Создание или обновление стилей
            let style = document.getElementById('dynamic-styles');
            if (!style) {
                style = document.createElement('style');
                style.id = 'dynamic-styles';
                document.head.appendChild(style);
            }
            
            const borderRadius = userSettings.design.borderRadius + 'px';
            const shadowIntensity = userSettings.design.shadowIntensity / 10;
            const opacity = userSettings.design.opacity / 10;
            
            style.textContent = `
                .container, .tab-content, .member-card, .game-card, .comment, .comment-form, .comments-section,
                .modal-content, .game-container, .game-cell, .snake-board, .memory-card, .breakout-canvas,
                .settings-section, .settings-modal-content {
                    border-radius: ${borderRadius} !important;
                }
                
                .tab-btn, .game-btn, .submit-btn, .mode-btn, .save-settings-btn, .image-upload,
                .settings-button {
                    border-radius: ${Math.max(15, userSettings.design.borderRadius * 2)}px !important;
                }
                
                .tab-content, .member-card, .game-card, .comment, .comment-form, .comments-section,
                .game-container, .snake-board, .settings-section {
                    box-shadow: 0 5px 15px rgba(0, 0, 0, ${shadowIntensity}) !important;
                }
                
                .modal-content, .settings-modal-content {
                    box-shadow: 0 20px 50px rgba(0, 0, 0, ${Math.min(0.7, shadowIntensity * 2)}) !important;
                }
                
                .tab-content, .member-card, .game-card, .comment, .comment-form, .comments-section,
                .game-container, .settings-section {
                    background: rgba(0, 0, 0, ${opacity}) !important;
                }
                
                .light-theme .tab-content, .light-theme .member-card, .light-theme .game-card, 
                .light-theme .comment, .light-theme .comment-form, .light-theme .comments-section,
                .light-theme .game-container, .light-theme .settings-section {
                    background: rgba(255, 255, 255, ${Math.min(0.9, opacity + 0.5)}) !important;
                }
            `;
        }
        
        // Обновление значений слайдеров
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('range-slider')) {
                const valueElement = document.getElementById(e.target.id + 'Value');
                if (valueElement) {
                    if (e.target.id === 'snowSize' || e.target.id === 'shadowIntensity' || e.target.id === 'opacity') {
                        valueElement.textContent = (e.target.value / (e.target.id === 'snowSize' ? 10 : 10)).toFixed(1);
                    } else {
                        valueElement.textContent = e.target.value;
                    }
                }
            }
        });
        
        // Закрытие модальных окон при клике вне их
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal, .settings-modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
        
        // Игра Крестики-Нолики
        let currentPlayer = 'X';
        let gameBoard = ['', '', '', '', '', '', '', '', ''];
        let gameActive = true;
        let ticTacToeMode = 'ai';

        function initTicTacToe() {
            const board = document.getElementById('ticTacToeBoard');
            board.innerHTML = '';
            gameBoard = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            gameActive = true;
            document.getElementById('ticTacToeInfo').textContent = 'Ваш ход: ' + currentPlayer;
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'game-cell';
                cell.setAttribute('data-index', i);
                cell.addEventListener('click', () => makeMove(i));
                board.appendChild(cell);
            }
        }

        function makeMove(index) {
            if (gameBoard[index] !== '' || !gameActive) return;
            
            gameBoard[index] = currentPlayer;
            const cell = document.querySelector(`[data-index="${index}"]`);
            cell.textContent = currentPlayer;
            cell.style.animation = 'pulse 0.3s';
            
            if (checkWinner()) {
                document.getElementById('ticTacToeInfo').textContent = `Победитель: ${currentPlayer}!`;
                gameActive = false;
                return;
            }
            
            if (gameBoard.every(cell => cell !== '')) {
                document.getElementById('ticTacToeInfo').textContent = 'Ничья!';
                gameActive = false;
                return;
            }
            
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            document.getElementById('ticTacToeInfo').textContent = 'Ваш ход: ' + currentPlayer;
            
            // Ход ИИ или второго игрока
            if (ticTacToeMode === 'ai' && currentPlayer === 'O' && gameActive) {
                setTimeout(makeAIMove, 800);
            }
        }

        function makeAIMove() {
            // Улучшенный ИИ - сначала проверяем выигрышные ходы
            // Проверяем, может ли ИИ выиграть
            for (let i = 0; i < 9; i++) {
                if (gameBoard[i] === '') {
                    gameBoard[i] = 'O';
                    if (checkWinnerInternal()) {
                        gameBoard[i] = '';
                        makeMove(i);
                        return;
                    }
                    gameBoard[i] = '';
                }
            }
            
            // Проверяем, может ли игрок выиграть и блокируем
            for (let i = 0; i < 9; i++) {
                if (gameBoard[i] === '') {
                    gameBoard[i] = 'X';
                    if (checkWinnerInternal()) {
                        gameBoard[i] = '';
                        makeMove(i);
                        return;
                    }
                    gameBoard[i] = '';
                }
            }
            
            // Иначе делаем случайный ход
            let emptyCells = [];
            gameBoard.forEach((cell, index) => {
                if (cell === '') emptyCells.push(index);
            });
            
            if (emptyCells.length > 0) {
                const randomIndex = Math.floor(Math.random() * emptyCells.length);
                makeMove(emptyCells[randomIndex]);
            }
        }

        function checkWinner() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // строки
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // столбцы
                [0, 4, 8], [2, 4, 6] // диагонали
            ];
            
            for (let pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                    // Подсветка выигрышной комбинации
                    document.querySelector(`[data-index="${a}"]`).style.background = 'rgba(78, 205, 196, 0.5)';
                    document.querySelector(`[data-index="${b}"]`).style.background = 'rgba(78, 205, 196, 0.5)';
                    document.querySelector(`[data-index="${c}"]`).style.background = 'rgba(78, 205, 196, 0.5)';
                    return true;
                }
            }
            return false;
        }

        function checkWinnerInternal() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];
            
            for (let pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                    return true;
                }
            }
            return false;
        }

        function resetTicTacToe() {
            initTicTacToe();
        }

        function setTicTacToeMode(mode) {
            ticTacToeMode = mode;
            document.querySelectorAll('#ticTacToeModal .mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            resetTicTacToe();
        }

        // Игра Змейка
        let snake = [{x: 10, y: 10}];
        let food = {x: 5, y: 5};
        let direction = {x: 0, y: 0};
        let score = 0;
        let snakeInterval;

        function initSnake() {
            snake = [{x: 10, y: 10}];
            food = generateFood();
            direction = {x: 0, y: 0};
            score = 0;
            document.getElementById('snakeInfo').textContent = 'Счет: ' + score;
            drawSnake();
        }

        function resetSnake() {
            clearInterval(snakeInterval);
            initSnake();
        }

        function generateFood() {
            return {
                x: Math.floor(Math.random() * 20),
                y: Math.floor(Math.random() * 20)
            };
        }

        function drawSnake() {
            const board = document.getElementById('snakeBoard');
            board.innerHTML = '';
            
            for (let y = 0; y < 20; y++) {
                for (let x = 0; x < 20; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'snake-cell';
                    
                    if (snake[0].x === x && snake[0].y === y) {
                        cell.classList.add('snake-head');
                    } else if (snake.some(segment => segment.x === x && segment.y === y)) {
                        cell.classList.add('snake-body');
                    } else if (food.x === x && food.y === y) {
                        cell.classList.add('snake-food');
                    }
                    
                    board.appendChild(cell);
                }
            }
        }

        function moveSnake() {
            if (direction.x === 0 && direction.y === 0) return;
            
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
            
            // Проверка столкновения со стенами (циклическое движение)
            if (head.x < 0) head.x = 19;
            if (head.x >= 20) head.x = 0;
            if (head.y < 0) head.y = 19;
            if (head.y >= 20) head.y = 0;
            
            // Проверка столкновения с собой
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                clearInterval(snakeInterval);
                alert('Игра окончена! Счет: ' + score);
                return;
            }
            
            snake.unshift(head);
            
            // Проверка съедания еды
            if (head.x === food.x && head.y === food.y) {
                score++;
                document.getElementById('snakeInfo').textContent = 'Счет: ' + score;
                food = generateFood();
            } else {
                snake.pop();
            }
            
            drawSnake();
        }

        function startSnake() {
            clearInterval(snakeInterval);
            initSnake();
            snakeInterval = setInterval(moveSnake, 150);
        }

        // Управление змейкой
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    if (direction.y === 0) direction = {x: 0, y: -1};
                    break;
                case 'ArrowDown':
                    if (direction.y === 0) direction = {x: 0, y: 1};
                    break;
                case 'ArrowLeft':
                    if (direction.x === 0) direction = {x: -1, y: 0};
                    break;
                case 'ArrowRight':
                    if (direction.x === 0) direction = {x: 1, y: 0};
                    break;
            }
        });

        // Игра Память
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let canFlip = true;

        function initMemory() {
            const symbols = ['😀', '😂', '🥰', '😎', '🤩', '🥳', '😍', '🤗'];
            memoryCards = [...symbols, ...symbols];
            shuffleArray(memoryCards);
            flippedCards = [];
            matchedPairs = 0;
            canFlip = true;
            document.getElementById('memoryInfo').textContent = 'Найдено пар: 0/8';
            
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            
            memoryCards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.setAttribute('data-index', index);
                card.innerHTML = '?';
                card.addEventListener('click', () => flipCard(index));
                grid.appendChild(card);
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function flipCard(index) {
            if (!canFlip || flippedCards.includes(index) || document.querySelector(`[data-index="${index}"]`).classList.contains('matched')) {
                return;
            }
            
            const card = document.querySelector(`[data-index="${index}"]`);
            card.innerHTML = memoryCards[index];
            card.classList.add('flipped');
            flippedCards.push(index);
            
            if (flippedCards.length === 2) {
                canFlip = false;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [firstIndex, secondIndex] = flippedCards;
            const firstCard = document.querySelector(`[data-index="${firstIndex}"]`);
            const secondCard = document.querySelector(`[data-index="${secondIndex}"]`);
            
            if (memoryCards[firstIndex] === memoryCards[secondIndex]) {
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                matchedPairs++;
                document.getElementById('memoryInfo').textContent = `Найдено пар: ${matchedPairs}/8`;
                
                if (matchedPairs === 8) {
                    setTimeout(() => alert('Поздравляем! Вы нашли все пары!'), 500);
                }
            } else {
                firstCard.innerHTML = '?';
                secondCard.innerHTML = '?';
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
            }
            
            flippedCards = [];
            canFlip = true;
        }

        function resetMemory() {
            initMemory();
        }

        // Игра Арканоид
        let breakoutCanvas, breakoutCtx;
        let breakoutPaddle, breakoutBall, breakoutBricks;
        let breakoutScore = 0;
        let breakoutLives = 3;
        let breakoutGameInterval;
        let breakoutKeys = {};

        function initBreakout() {
            breakoutCanvas = document.getElementById('breakoutCanvas');
            breakoutCtx = breakoutCanvas.getContext('2d');
            
            breakoutPaddle = {
                x: breakoutCanvas.width / 2 - 50,
                y: breakoutCanvas.height - 20,
                width: 100,
                height: 10,
                speed: 8
            };
            
            breakoutBall = {
                x: breakoutCanvas.width / 2,
                y: breakoutCanvas.height - 30,
                radius: 10,
                dx: 4,
                dy: -4
            };
            
            breakoutBricks = [];
            const brickRowCount = 5;
            const brickColumnCount = 10;
            
            for (let c = 0; c < brickColumnCount; c++) {
                breakoutBricks[c] = [];
                for (let r = 0; r < brickRowCount; r++) {
                    breakoutBricks[c][r] = { x: 0, y: 0, status: 1 };
                }
            }
            
            breakoutScore = 0;
            breakoutLives = 3;
            breakoutKeys = {};
            updateBreakoutInfo();
        }

        function resetBreakout() {
            clearInterval(breakoutGameInterval);
            initBreakout();
        }

        function drawBreakout() {
            breakoutCtx.clearRect(0, 0, breakoutCanvas.width, breakoutCanvas.height);
            
            // Рисуем платформу
            const paddleGradient = breakoutCtx.createLinearGradient(breakoutPaddle.x, breakoutPaddle.y, breakoutPaddle.x + breakoutPaddle.width, breakoutPaddle.y + breakoutPaddle.height);
            paddleGradient.addColorStop(0, '#4ecdc4');
            paddleGradient.addColorStop(1, '#45b7aa');
            breakoutCtx.fillStyle = paddleGradient;
            breakoutCtx.fillRect(breakoutPaddle.x, breakoutPaddle.y, breakoutPaddle.width, breakoutPaddle.height);
            
            // Рисуем мяч
            const ballGradient = breakoutCtx.createRadialGradient(breakoutBall.x, breakoutBall.y, 0, breakoutBall.x, breakoutBall.y, breakoutBall.radius);
            ballGradient.addColorStop(0, '#ff9999');
            ballGradient.addColorStop(1, '#ff6b6b');
            breakoutCtx.beginPath();
            breakoutCtx.arc(breakoutBall.x, breakoutBall.y, breakoutBall.radius, 0, Math.PI * 2);
            breakoutCtx.fillStyle = ballGradient;
            breakoutCtx.fill();
            breakoutCtx.closePath();
            
            // Рисуем кирпичи
            const brickWidth = 55;
            const brickHeight = 20;
            const brickPadding = 5;
            const brickOffsetTop = 30;
            const brickOffsetLeft = 30;
            
            for (let c = 0; c < 10; c++) {
                for (let r = 0; r < 5; r++) {
                    const brick = breakoutBricks[c][r];
                    if (brick.status === 1) {
                        const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
                        const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
                        brick.x = brickX;
                        brick.y = brickY;
                        
                        const brickGradient = breakoutCtx.createLinearGradient(brickX, brickY, brickX, brickY + brickHeight);
                        brickGradient.addColorStop(0, '#45b7aa');
                        brickGradient.addColorStop(1, '#3da59a');
                        breakoutCtx.fillStyle = brickGradient;
                        breakoutCtx.fillRect(brickX, brickY, brickWidth, brickHeight);
                        
                        // Добавляем рамку
                        breakoutCtx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                        breakoutCtx.lineWidth = 1;
                        breakoutCtx.strokeRect(brickX, brickY, brickWidth, brickHeight);
                    }
                }
            }
        }

        function updateBreakout() {
            drawBreakout();
            
            // Плавное движение платформы
            if (breakoutKeys['ArrowLeft']) {
                breakoutPaddle.x -= breakoutPaddle.speed;
                if (breakoutPaddle.x < 0) breakoutPaddle.x = 0;
            }
            if (breakoutKeys['ArrowRight']) {
                breakoutPaddle.x += breakoutPaddle.speed;
                if (breakoutPaddle.x + breakoutPaddle.width > breakoutCanvas.width) {
                    breakoutPaddle.x = breakoutCanvas.width - breakoutPaddle.width;
                }
            }
            
            // Движение мяча
            breakoutBall.x += breakoutBall.dx;
            breakoutBall.y += breakoutBall.dy;
            
            // Отскок от стен (левая и правая)
            if (breakoutBall.x + breakoutBall.dx > breakoutCanvas.width - breakoutBall.radius || breakoutBall.x + breakoutBall.dx < breakoutBall.radius) {
                breakoutBall.dx = -breakoutBall.dx;
            }
            
            // Отскок от верхней стены
            if (breakoutBall.y + breakoutBall.dy < breakoutBall.radius) {
                breakoutBall.dy = -breakoutBall.dy;
            } 
            // Проверка падения мяча вниз
            else if (breakoutBall.y + breakoutBall.dy > breakoutCanvas.height - breakoutBall.radius) {
                if (breakoutBall.x > breakoutPaddle.x && breakoutBall.x < breakoutPaddle.x + breakoutPaddle.width) {
                    // Отскок от платформы
                    breakoutBall.dy = -Math.abs(breakoutBall.dy); // Всегда отскакивает вверх
                    // Изменяем угол в зависимости от места удара
                    let hitPosition = (breakoutBall.x - (breakoutPaddle.x + breakoutPaddle.width/2)) / (breakoutPaddle.width/2);
                    breakoutBall.dx = hitPosition * 6; // Максимальная скорость по x
                } else {
                    // Мяч упал
                    breakoutLives--;
                    updateBreakoutInfo();
                    if (breakoutLives <= 0) {
                        clearInterval(breakoutGameInterval);
                        alert('Игра окончена! Счет: ' + breakoutScore);
                        return;
                    } else {
                        // Сброс позиции мяча
                        breakoutBall.x = breakoutCanvas.width / 2;
                        breakoutBall.y = breakoutCanvas.height - 30;
                        breakoutBall.dx = (Math.random() - 0.5) * 8; // Случайное направление
                        breakoutBall.dy = -4;
                        breakoutPaddle.x = breakoutCanvas.width / 2 - 50;
                    }
                }
            }
            
            // Проверка столкновения с кирпичами
            const brickWidth = 55;
            const brickHeight = 20;
            const brickPadding = 5;
            const brickOffsetTop = 30;
            const brickOffsetLeft = 30;
            
            for (let c = 0; c < 10; c++) {
                for (let r = 0; r < 5; r++) {
                    const brick = breakoutBricks[c][r];
                    if (brick.status === 1) {
                        if (breakoutBall.x > brick.x && breakoutBall.x < brick.x + brickWidth && 
                            breakoutBall.y > brick.y && breakoutBall.y < brick.y + brickHeight) {
                            breakoutBall.dy = -breakoutBall.dy;
                            brick.status = 0;
                            breakoutScore += 10;
                            updateBreakoutInfo();
                            
                            // Проверка победы
                            let bricksLeft = 0;
                            for (let i = 0; i < 10; i++) {
                                for (let j = 0; j < 5; j++) {
                                    if (breakoutBricks[i][j].status === 1) bricksLeft++;
                                }
                            }
                            if (bricksLeft === 0) {
                                clearInterval(breakoutGameInterval);
                                alert('Поздравляем! Вы выиграли! Счет: ' + breakoutScore);
                            }
                            return; // Выходим после первого столкновения
                        }
                    }
                }
            }
        }

        function updateBreakoutInfo() {
            document.getElementById('breakoutInfo').textContent = `Счет: ${breakoutScore} | Жизни: ${breakoutLives}`;
        }

        function startBreakout() {
            initBreakout();
            clearInterval(breakoutGameInterval);
            breakoutGameInterval = setInterval(updateBreakout, 16);
        }

        // Управление арканоидом (плавное движение)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                breakoutKeys[e.key] = true;
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                breakoutKeys[e.key] = false;
            }
        });

        // Игра Понг
        let pongCanvas, pongCtx;
        let pongLeftPaddle, pongRightPaddle, pongBall;
        let pongLeftScore = 0, pongRightScore = 0;
        let pongGameInterval;
        let pongKeys = {};
        let pongMode = 'ai';

        function initPong() {
            pongCanvas = document.getElementById('pongCanvas');
            pongCtx = pongCanvas.getContext('2d');
            
            pongLeftPaddle = {
                x: 10,
                y: pongCanvas.height / 2 - 40,
                width: 10,
                height: 80,
                speed: 8
            };
            
            pongRightPaddle = {
                x: pongCanvas.width - 20,
                y: pongCanvas.height / 2 - 40,
                width: 10,
                height: 80,
                speed: 8
            };
            
            pongBall = {
                x: pongCanvas.width / 2,
                y: pongCanvas.height / 2,
                radius: 10,
                dx: 5,
                dy: 5
            };
            
            pongLeftScore = 0;
            pongRightScore = 0;
            pongKeys = {};
            updatePongInfo();
        }

        function resetPong() {
            clearInterval(pongGameInterval);
            initPong();
        }

        function drawPong() {
            pongCtx.clearRect(0, 0, pongCanvas.width, pongCanvas.height);
            
            // Рисуем платформы
            const leftPaddleGradient = pongCtx.createLinearGradient(pongLeftPaddle.x, pongLeftPaddle.y, pongLeftPaddle.x + pongLeftPaddle.width, pongLeftPaddle.y + pongLeftPaddle.height);
            leftPaddleGradient.addColorStop(0, '#4ecdc4');
            leftPaddleGradient.addColorStop(1, '#45b7aa');
            pongCtx.fillStyle = leftPaddleGradient;
            pongCtx.fillRect(pongLeftPaddle.x, pongLeftPaddle.y, pongLeftPaddle.width, pongLeftPaddle.height);
            
            const rightPaddleGradient = pongCtx.createLinearGradient(pongRightPaddle.x, pongRightPaddle.y, pongRightPaddle.x + pongRightPaddle.width, pongRightPaddle.y + pongRightPaddle.height);
            rightPaddleGradient.addColorStop(0, '#4ecdc4');
            rightPaddleGradient.addColorStop(1, '#45b7aa');
            pongCtx.fillStyle = rightPaddleGradient;
            pongCtx.fillRect(pongRightPaddle.x, pongRightPaddle.y, pongRightPaddle.width, pongRightPaddle.height);
            
            // Рисуем мяч
            const ballGradient = pongCtx.createRadialGradient(pongBall.x, pongBall.y, 0, pongBall.x, pongBall.y, pongBall.radius);
            ballGradient.addColorStop(0, '#ff9999');
            ballGradient.addColorStop(1, '#ff6b6b');
            pongCtx.beginPath();
            pongCtx.arc(pongBall.x, pongBall.y, pongBall.radius, 0, Math.PI * 2);
            pongCtx.fillStyle = ballGradient;
            pongCtx.fill();
            pongCtx.closePath();
            
            // Рисуем центральную линию
            pongCtx.setLineDash([5, 15]);
            pongCtx.beginPath();
            pongCtx.moveTo(pongCanvas.width / 2, 0);
            pongCtx.lineTo(pongCanvas.width / 2, pongCanvas.height);
            pongCtx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            pongCtx.lineWidth = 2;
            pongCtx.stroke();
            pongCtx.setLineDash([]);
        }

        function updatePong() {
            drawPong();
            
            // Плавное движение платформ
            // Левая платформа (игрок 1) - поддержка разных раскладок
            if (pongKeys['w'] || pongKeys['W'] || pongKeys['ц'] || pongKeys['Ц']) {
                pongLeftPaddle.y -= pongLeftPaddle.speed;
                if (pongLeftPaddle.y < 0) pongLeftPaddle.y = 0;
            }
            if (pongKeys['s'] || pongKeys['S'] || pongKeys['ы'] || pongKeys['Ы']) {
                pongLeftPaddle.y += pongLeftPaddle.speed;
                if (pongLeftPaddle.y + pongLeftPaddle.height > pongCanvas.height) {
                    pongLeftPaddle.y = pongCanvas.height - pongLeftPaddle.height;
                }
            }
            
            // Правая платформа (игрок 2 или ИИ)
            if (pongMode === 'pvp') {
                if (pongKeys['ArrowUp']) {
                    pongRightPaddle.y -= pongRightPaddle.speed;
                    if (pongRightPaddle.y < 0) pongRightPaddle.y = 0;
                }
                if (pongKeys['ArrowDown']) {
                    pongRightPaddle.y += pongRightPaddle.speed;
                    if (pongRightPaddle.y + pongRightPaddle.height > pongCanvas.height) {
                        pongRightPaddle.y = pongCanvas.height - pongRightPaddle.height;
                    }
                }
            } else {
                // ИИ для правой платформы
                if (pongRightPaddle.y + pongRightPaddle.height/2 < pongBall.y - 35) {
                    pongRightPaddle.y += pongRightPaddle.speed * 0.7; // Слегка замедленный ИИ
                } else if (pongRightPaddle.y + pongRightPaddle.height/2 > pongBall.y + 35) {
                    pongRightPaddle.y -= pongRightPaddle.speed * 0.7;
                }
                
                // Ограничиваем движение ИИ
                if (pongRightPaddle.y < 0) pongRightPaddle.y = 0;
                if (pongRightPaddle.y + pongRightPaddle.height > pongCanvas.height) {
                    pongRightPaddle.y = pongCanvas.height - pongRightPaddle.height;
                }
            }
            
            // Движение мяча
            pongBall.x += pongBall.dx;
            pongBall.y += pongBall.dy;
            
            // Отскок от верхней и нижней стен
            if (pongBall.y + pongBall.dy < pongBall.radius || pongBall.y + pongBall.dy > pongCanvas.height - pongBall.radius) {
                pongBall.dy = -pongBall.dy;
            }
            
            // Отскок от платформ
            // Левая платформа
            if (pongBall.x - pongBall.radius < pongLeftPaddle.x + pongLeftPaddle.width) {
                if (pongBall.y > pongLeftPaddle.y && pongBall.y < pongLeftPaddle.y + pongLeftPaddle.height) {
                    pongBall.dx = Math.abs(pongBall.dx);
                    // Изменяем угол в зависимости от места удара
                    let hitPosition = (pongBall.y - (pongLeftPaddle.y + pongLeftPaddle.height/2)) / (pongLeftPaddle.height/2);
                    pongBall.dy = hitPosition * 5;
                }
            }
            
            // Правая платформа
            if (pongBall.x + pongBall.radius > pongRightPaddle.x) {
                if (pongBall.y > pongRightPaddle.y && pongBall.y < pongRightPaddle.y + pongRightPaddle.height) {
                    pongBall.dx = -Math.abs(pongBall.dx);
                    // Изменяем угол в зависимости от места удара
                    let hitPosition = (pongBall.y - (pongRightPaddle.y + pongRightPaddle.height/2)) / (pongRightPaddle.height/2);
                    pongBall.dy = hitPosition * 5;
                }
            }
            
            // Проверка забитых голов
            if (pongBall.x < 0) {
                pongRightScore++;
                resetPongBall();
                updatePongInfo();
            } else if (pongBall.x > pongCanvas.width) {
                pongLeftScore++;
                resetPongBall();
                updatePongInfo();
            }
        }

        function resetPongBall() {
            pongBall.x = pongCanvas.width / 2;
            pongBall.y = pongCanvas.height / 2;
            pongBall.dx = (Math.random() > 0.5 ? 1 : -1) * 5;
            pongBall.dy = (Math.random() - 0.5) * 10;
        }

        function updatePongInfo() {
            document.getElementById('pongInfo').textContent = `Игрок 1: ${pongLeftScore} | Игрок 2: ${pongRightScore}`;
        }

        function startPong() {
            initPong();
            clearInterval(pongGameInterval);
            pongGameInterval = setInterval(updatePong, 16);
        }

        function setPongMode(mode) {
            pongMode = mode;
            document.querySelectorAll('#pongModal .mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            resetPong();
        }

        // Управление понгом (плавное движение) - поддержка разных раскладок
        document.addEventListener('keydown', (e) => {
            // Игрок 1 (W/S и Ц/Ы)
            if (e.key === 'w' || e.key === 'W' || e.key === 's' || e.key === 'S' || 
                e.key === 'ц' || e.key === 'Ц' || e.key === 'ы' || e.key === 'Ы' || 
                e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                pongKeys[e.key] = true;
            }
        });

        document.addEventListener('keyup', (e) => {
            // Игрок 1 (W/S и Ц/Ы)
            if (e.key === 'w' || e.key === 'W' || e.key === 's' || e.key === 'S' || 
                e.key === 'ц' || e.key === 'Ц' || e.key === 'ы' || e.key === 'Ы' || 
                e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                pongKeys[e.key] = false;
            }
        });

        // Новая игра - Тетрис
        let tetrisCanvas, tetrisCtx;
        let tetrisBoard = [];
        let tetrisCurrentPiece, tetrisNextPiece;
        let tetrisScore = 0;
        let tetrisLevel = 1;
        let tetrisLines = 0;
        let tetrisGameInterval;
        let tetrisKeys = {};

        const TETRIS_COLS = 10;
        const TETRIS_ROWS = 20;
        const TETRIS_BLOCK_SIZE = 30;

        const TETRIS_PIECES = [
            { shape: [[1]][[1]][[1]][[1]], color: '#00f0f0' }, // I
            { shape: [[1,1,1],[0,1,0]], color: '#0000f0' }, // T
            { shape: [[1,1,1],[1,0,0]], color: '#f0a000' }, // L
            { shape: [[1,1,1],[0,0,1]], color: '#00f000' }, // J
            { shape: [[1,1],[1,1]], color: '#f00000' }, // O
            { shape: [[0,1,1],[1,1,0]], color: '#f000f0' }, // S
            { shape: [[1,1,0],[0,1,1]], color: '#00f000' }  // Z
        ];

        function initTetris() {
            tetrisCanvas = document.getElementById('tetrisCanvas');
            tetrisCtx = tetrisCanvas.getContext('2d');
            
            // Инициализация игрового поля
            tetrisBoard = Array(TETRIS_ROWS).fill().map(() => Array(TETRIS_COLS).fill(0));
            
            tetrisScore = 0;
            tetrisLevel = 1;
            tetrisLines = 0;
            tetrisKeys = {};
            
            // Создание первой фигуры
            tetrisCurrentPiece = createRandomPiece();
            tetrisNextPiece = createRandomPiece();
            
            updateTetrisInfo();
        }

        function createRandomPiece() {
            const piece = JSON.parse(JSON.stringify(TETRIS_PIECES[Math.floor(Math.random() * TETRIS_PIECES.length)]));
            piece.x = Math.floor(TETRIS_COLS / 2) - Math.floor(piece.shape[0].length / 2);
            piece.y = 0;
            return piece;
        }

        function drawTetris() {
            tetrisCtx.clearRect(0, 0, tetrisCanvas.width, tetrisCanvas.height);
            
            // Рисуем игровое поле
            for (let y = 0; y < TETRIS_ROWS; y++) {
                for (let x = 0; x < TETRIS_COLS; x++) {
                    if (tetrisBoard[y][x]) {
                        tetrisCtx.fillStyle = tetrisBoard[y][x];
                        tetrisCtx.fillRect(x * TETRIS_BLOCK_SIZE, y * TETRIS_BLOCK_SIZE, TETRIS_BLOCK_SIZE - 1, TETRIS_BLOCK_SIZE - 1);
                    }
                }
            }
            
            // Рисуем текущую фигуру
            if (tetrisCurrentPiece) {
                tetrisCtx.fillStyle = tetrisCurrentPiece.color;
                for (let y = 0; y < tetrisCurrentPiece.shape.length; y++) {
                    for (let x = 0; x < tetrisCurrentPiece.shape[y].length; x++) {
                        if (tetrisCurrentPiece.shape[y][x]) {
                            tetrisCtx.fillRect(
                                (tetrisCurrentPiece.x + x) * TETRIS_BLOCK_SIZE,
                                (tetrisCurrentPiece.y + y) * TETRIS_BLOCK_SIZE,
                                TETRIS_BLOCK_SIZE - 1,
                                TETRIS_BLOCK_SIZE - 1
                            );
                        }
                    }
                }
            }
        }

        function updateTetris() {
            drawTetris();
        }

        function updateTetrisInfo() {
            document.getElementById('tetrisInfo').textContent = `Счет: ${tetrisScore} | Уровень: ${tetrisLevel}`;
        }

        function startTetris() {
            initTetris();
            clearInterval(tetrisGameInterval);
            tetrisGameInterval = setInterval(updateTetris, 500);
        }

        function resetTetris() {
            clearInterval(tetrisGameInterval);
            initTetris();
        }

        // Новая игра - Сапер
        let minesweeperBoard = [];
        let minesweeperMines = 10;
        let minesweeperFlags = 0;
        let minesweeperGameActive = true;

        function initMinesweeper() {
            const board = document.getElementById('minesweeperBoard');
            board.innerHTML = '';
            minesweeperBoard = [];
            minesweeperFlags = 0;
            minesweeperGameActive = true;
            
            // Создание игрового поля 10x10
            for (let y = 0; y < 10; y++) {
                minesweeperBoard[y] = [];
                for (let x = 0; x < 10; x++) {
                    minesweeperBoard[y][x] = {
                        isMine: false,
                        isRevealed: false,
                        isFlagged: false,
                        neighborMines: 0
                    };
                    
                    const cell = document.createElement('div');
                    cell.className = 'snake-cell';
                    cell.setAttribute('data-x', x);
                    cell.setAttribute('data-y', y);
                    cell.addEventListener('click', () => revealMinesweeperCell(x, y));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        toggleMinesweeperFlag(x, y);
                    });
                    board.appendChild(cell);
                }
            }
            
            // Расстановка мин
            let minesPlaced = 0;
            while (minesPlaced < minesweeperMines) {
                const x = Math.floor(Math.random() * 10);
                const y = Math.floor(Math.random() * 10);
                if (!minesweeperBoard[y][x].isMine) {
                    minesweeperBoard[y][x].isMine = true;
                    minesPlaced++;
                }
            }
            
            // Подсчет соседних мин
            for (let y = 0; y < 10; y++) {
                for (let x = 0; x < 10; x++) {
                    if (!minesweeperBoard[y][x].isMine) {
                        let count = 0;
                        for (let dy = -1; dy <= 1; dy++) {
                            for (let dx = -1; dx <= 1; dx++) {
                                const nx = x + dx;
                                const ny = y + dy;
                                if (nx >= 0 && nx < 10 && ny >= 0 && ny < 10 && minesweeperBoard[ny][nx].isMine) {
                                    count++;
                                }
                            }
                        }
                        minesweeperBoard[y][x].neighborMines = count;
                    }
                }
            }
            
            updateMinesweeperInfo();
        }

        function revealMinesweeperCell(x, y) {
            if (!minesweeperGameActive || minesweeperBoard[y][x].isFlagged || minesweeperBoard[y][x].isRevealed) return;
            
            minesweeperBoard[y][x].isRevealed = true;
            const cell = document.querySelector(`[data-x="${x}"][data-y="${y}"]`);
            
            if (minesweeperBoard[y][x].isMine) {
                cell.innerHTML = '💣';
                cell.style.background = 'rgba(255, 0, 0, 0.5)';
                minesweeperGameActive = false;
                alert('Вы проиграли!');
                return;
            }
            
            if (minesweeperBoard[y][x].neighborMines > 0) {
                cell.innerHTML = minesweeperBoard[y][x].neighborMines;
                cell.style.color = getNumberColor(minesweeperBoard[y][x].neighborMines);
            } else {
                cell.style.background = 'rgba(100, 100, 100, 0.3)';
                // Рекурсивное открытие соседних клеток
                for (let dy = -1; dy <= 1; dy++) {
                    for (let dx = -1; dx <= 1; dx++) {
                        const nx = x + dx;
                        const ny = y + dy;
                        if (nx >= 0 && nx < 10 && ny >= 0 && ny < 10) {
                            revealMinesweeperCell(nx, ny);
                        }
                    }
                }
            }
            
            checkMinesweeperWin();
        }

        function toggleMinesweeperFlag(x, y) {
            if (!minesweeperGameActive || minesweeperBoard[y][x].isRevealed) return;
            
            const cell = document.querySelector(`[data-x="${x}"][data-y="${y}"]`);
            
            if (minesweeperBoard[y][x].isFlagged) {
                minesweeperBoard[y][x].isFlagged = false;
                cell.innerHTML = '';
                minesweeperFlags--;
            } else {
                minesweeperBoard[y][x].isFlagged = true;
                cell.innerHTML = '🚩';
                minesweeperFlags++;
            }
            
            updateMinesweeperInfo();
        }

        function getNumberColor(num) {
            const colors = ['#0000ff', '#008000', '#ff0000', '#000080', '#800000', '#008080', '#000000', '#808080'];
            return colors[num - 1] || '#000000';
        }

        function checkMinesweeperWin() {
            let revealedCount = 0;
            for (let y = 0; y < 10; y++) {
                for (let x = 0; x < 10; x++) {
                    if (minesweeperBoard[y][x].isRevealed && !minesweeperBoard[y][x].isMine) {
                        revealedCount++;
                    }
                }
            }
            
            if (revealedCount === 100 - minesweeperMines) {
                minesweeperGameActive = false;
                alert('Поздравляем! Вы выиграли!');
            }
        }

        function updateMinesweeperInfo() {
            document.getElementById('minesweeperInfo').textContent = `Мины: ${minesweeperMines} | Флаги: ${minesweeperFlags}`;
        }

        function resetMinesweeper() {
            initMinesweeper();
        }

        // Новая игра - Космические захватчики
        let spaceInvadersCanvas, spaceInvadersCtx;
        let spaceInvadersPlayer, spaceInvadersEnemies = [], spaceInvadersBullets = [];
        let spaceInvadersScore = 0;
        let spaceInvadersLives = 3;
        let spaceInvadersGameInterval;
        let spaceInvadersKeys = {};

        function initSpaceInvaders() {
            spaceInvadersCanvas = document.getElementById('spaceInvadersCanvas');
            spaceInvadersCtx = spaceInvadersCanvas.getContext('2d');
            
            // Игрок
            spaceInvadersPlayer = {
                x: spaceInvadersCanvas.width / 2 - 15,
                y: spaceInvadersCanvas.height - 30,
                width: 30,
                height: 20,
                speed: 6
            };
            
            // Враги
            spaceInvadersEnemies = [];
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 10; col++) {
                    spaceInvadersEnemies.push({
                        x: col * 50 + 50,
                        y: row * 40 + 50,
                        width: 30,
                        height: 20,
                        alive: true
                    });
                }
            }
            
            spaceInvadersBullets = [];
            spaceInvadersScore = 0;
            spaceInvadersLives = 3;
            spaceInvadersKeys = {};
            
            updateSpaceInvadersInfo();
        }

        function drawSpaceInvaders() {
            spaceInvadersCtx.clearRect(0, 0, spaceInvadersCanvas.width, spaceInvadersCanvas.height);
            
            // Рисуем игрока
            spaceInvadersCtx.fillStyle = '#4ecdc4';
            spaceInvadersCtx.fillRect(spaceInvadersPlayer.x, spaceInvadersPlayer.y, spaceInvadersPlayer.width, spaceInvadersPlayer.height);
            
            // Рисуем врагов
            spaceInvadersCtx.fillStyle = '#ff6b6b';
            spaceInvadersEnemies.forEach(enemy => {
                if (enemy.alive) {
                    spaceInvadersCtx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                }
            });
            
            // Рисуем пули
            spaceInvadersCtx.fillStyle = '#ffffff';
            spaceInvadersBullets.forEach(bullet => {
                spaceInvadersCtx.fillRect(bullet.x, bullet.y, 3, 10);
            });
        }

        function updateSpaceInvaders() {
            drawSpaceInvaders();
            
            // Движение игрока
            if (spaceInvadersKeys['ArrowLeft']) {
                spaceInvadersPlayer.x -= spaceInvadersPlayer.speed;
                if (spaceInvadersPlayer.x < 0) spaceInvadersPlayer.x = 0;
            }
            if (spaceInvadersKeys['ArrowRight']) {
                spaceInvadersPlayer.x += spaceInvadersPlayer.speed;
                if (spaceInvadersPlayer.x > spaceInvadersCanvas.width - spaceInvadersPlayer.width) {
                    spaceInvadersPlayer.x = spaceInvadersCanvas.width - spaceInvadersPlayer.width;
                }
            }
            
            // Движение пуль
            for (let i = spaceInvadersBullets.length - 1; i >= 0; i--) {
                spaceInvadersBullets[i].y -= 8;
                if (spaceInvadersBullets[i].y < 0) {
                    spaceInvadersBullets.splice(i, 1);
                }
            }
            
            // Проверка столкновений
            for (let i = spaceInvadersBullets.length - 1; i >= 0; i--) {
                for (let j = 0; j < spaceInvadersEnemies.length; j++) {
                    if (spaceInvadersEnemies[j].alive &&
                        spaceInvadersBullets[i].x > spaceInvadersEnemies[j].x &&
                        spaceInvadersBullets[i].x < spaceInvadersEnemies[j].x + spaceInvadersEnemies[j].width &&
                        spaceInvadersBullets[i].y > spaceInvadersEnemies[j].y &&
                        spaceInvadersBullets[i].y < spaceInvadersEnemies[j].y + spaceInvadersEnemies[j].height) {
                        spaceInvadersEnemies[j].alive = false;
                        spaceInvadersBullets.splice(i, 1);
                        spaceInvadersScore += 10;
                        updateSpaceInvadersInfo();
                        break;
                    }
                }
            }
            
            // Проверка победы
            const aliveEnemies = spaceInvadersEnemies.filter(enemy => enemy.alive);
            if (aliveEnemies.length === 0) {
                clearInterval(spaceInvadersGameInterval);
                alert('Поздравляем! Вы выиграли! Счет: ' + spaceInvadersScore);
            }
        }

        function shootSpaceInvaders() {
            spaceInvadersBullets.push({
                x: spaceInvadersPlayer.x + spaceInvadersPlayer.width / 2 - 1.5,
                y: spaceInvadersPlayer.y
            });
        }

        function updateSpaceInvadersInfo() {
            document.getElementById('spaceInvadersInfo').textContent = `Счет: ${spaceInvadersScore} | Жизни: ${spaceInvadersLives}`;
        }

        function startSpaceInvaders() {
            initSpaceInvaders();
            clearInterval(spaceInvadersGameInterval);
            spaceInvadersGameInterval = setInterval(updateSpaceInvaders, 50);
        }

        function resetSpaceInvaders() {
            clearInterval(spaceInvadersGameInterval);
            initSpaceInvaders();
        }

        // Управление космическими захватчиками
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                spaceInvadersKeys[e.key] = true;
            }
            if (e.key === ' ') {
                e.preventDefault();
                shootSpaceInvaders();
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                spaceInvadersKeys[e.key] = false;
            }
        });

        // Комментарии
        let comments = JSON.parse(localStorage.getItem('okComments') || '[]');

        function displayComments() {
            const commentsList = document.getElementById('commentsList');
            const noComments = document.getElementById('noComments');
            
            if (comments.length === 0) {
                noComments.style.display = 'block';
                commentsList.innerHTML = '<div class="no-comments" id="noComments">Пока нет комментариев. Будьте первым!</div>';
                return;
            }
            
            noComments.style.display = 'none';
            
            comments.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let commentsHTML = '';
            comments.forEach(comment => {
                commentsHTML += `
                    <div class="comment">
                        <div class="comment-header">
                            <div class="comment-avatar">${comment.avatar || comment.name.charAt(0).toUpperCase()}</div>
                            <div class="comment-info">
                                <span class="comment-author">${comment.name}</span>
                                <span class="comment-date">${formatDate(comment.date)}</span>
                            </div>
                        </div>
                        <div class="comment-text">
                            ${comment.text}
                        </div>
                    </div>
                `;
            });
            
            commentsList.innerHTML = commentsHTML;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function addComment(name, text) {
            const comment = {
                name: name,
                text: text,
                date: new Date().toISOString(),
                avatar: name.charAt(0).toUpperCase()
            };
            
            comments.push(comment);
            localStorage.setItem('okComments', JSON.stringify(comments));
            displayComments();
        }

        document.getElementById('commentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('commentName').value.trim();
            const text = document.getElementById('commentText').value.trim();
            
            if (name && text) {
                addComment(name, text);
                document.getElementById('commentForm').reset();
                document.getElementById('commentName').value = name;
            }
        });

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Применение настроек
            applySettings();
            
            // Отображение комментариев
            displayComments();
            
            // Создание снега
            createSnow();
            
            // Автоматическое создание новых снежинок
            setInterval(() => {
                if (userSettings.snow.count > 0) {
                    createSingleSnow();
                }
            }, 3000);
        });
    </script>

    <!-- Подключение Font Awesome для иконок -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<script>
    // Загрузка и отображение комментариев
    function loadComments() {
        const comments = JSON.parse(localStorage.getItem('okComments')) || [];
        const commentsList = document.getElementById('commentsList');
        const noComments = document.getElementById('noComments');

        commentsList.innerHTML = '';
        if (comments.length === 0) {
            noComments.style.display = 'block';
        } else {
            noComments.style.display = 'none';
            comments.forEach(comment => {
                const commentEl = document.createElement('div');
                commentEl.className = 'comment';
                commentEl.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-avatar">${comment.avatar}</div>
                        <div class="comment-author">${comment.name}</div>
                        <div class="comment-date">${comment.date}</div>
                    </div>
                    <div class="comment-text">${comment.text}</div>
                `;
                commentsList.appendChild(commentEl);
            });
        }
    }

    // Обработка отправки комментария
    document.getElementById('commentForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('commentName').value.trim();
        const text = document.getElementById('commentText').value.trim();
        if (name === '' || text === '') return;

        const avatar = name.charAt(0).toUpperCase();
        const now = new Date();
        const date = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();

        const comment = { name, text, avatar, date };
        const comments = JSON.parse(localStorage.getItem('okComments')) || [];
        comments.unshift(comment);
        localStorage.setItem('okComments', JSON.stringify(comments));

        document.getElementById('commentForm').reset();
        loadComments();
    });

    // Загрузка при старте
    window.addEventListener('DOMContentLoaded', loadComments);
</script>

<script>
// Хранилище лидеров
function updateLeaderboard(game, score, name) {
    const key = 'okLeaderboard';
    const data = JSON.parse(localStorage.getItem(key)) || [];

    // если уже есть запись — обновляем
    const existing = data.find(entry => entry.game === game && entry.name === name);
    if (existing) {
        if (score > existing.score) existing.score = score;
    } else {
        data.push({ game, name, score });
    }

    localStorage.setItem(key, JSON.stringify(data));
}

// Показать таблицу лидеров
function showLeaderboard() {
    const data = JSON.parse(localStorage.getItem('okLeaderboard')) || [];
    let html = '<h2 style="color:#4ecdc4;">🏆 Таблица Лидеров</h2><ul style="list-style:none;padding:0">';
    if (data.length === 0) {
        html += '<li style="color:#ccc;">Нет записей</li>';
    } else {
        data.sort((a, b) => b.score - a.score);
        data.forEach(entry => {
            html += `<li style="margin:6px 0;">🎮 <b>${entry.game}</b>: <span style="color:#ff6b6b">${entry.name}</span> — <b>${entry.score}</b></li>`;
        });
    }
    html += '</ul>';
    alert(html);
}

// Пример использования:
// updateLeaderboard('Крестики-Нолики', 1, 'Игрок'); // после победы
// showLeaderboard(); // вызвать вручную или кнопкой
</script>


<script>
// Настройки эффектов
function applyEffectSettings() {
    const type = document.getElementById('effectType').value;
    const symbol = document.getElementById('customSymbol').value || '❄';
    const rotate = document.getElementById('rotateSymbols').checked;
    const fall = document.getElementById('fallingEnabled').checked;

    // Очистка
    document.getElementById('snow-container').innerHTML = "";

    // Добавим новые символы
    if (!fall) return;

    const count = 30;
    for (let i = 0; i < count; i++) {
        const el = document.createElement('div');
        el.textContent = (type === 'custom') ? symbol : (type === 'stars' ? '✦' : '❄');
        el.className = 'snowflake';
        el.style.left = Math.random() * 100 + 'vw';
        el.style.animationDuration = (5 + Math.random() * 10) + 's';
        el.style.opacity = (0.5 + Math.random() * 0.5);
        el.style.fontSize = (Math.random() * 1.5 + 0.8) + 'rem';
        if (rotate) el.style.transform = `rotate(${Math.random() * 360}deg)`;
        document.getElementById('snow-container').appendChild(el);
    }
}

// Обновление дизайна
function applyUIStyle() {
    const style = document.getElementById('uiStyle').value;
    const root = document.documentElement;
    if (style === 'flat') {
        document.querySelectorAll('button, .submit-btn, .game-btn').forEach(btn => {
            btn.style.boxShadow = 'none';
        });
    } else {
        document.querySelectorAll('button, .submit-btn, .game-btn').forEach(btn => {
            btn.style.boxShadow = '0 4px 0 #333';
        });
    }
}

// Очистка таблицы лидеров
function clearLeaderboard() {
    localStorage.removeItem('okLeaderboard');
    alert('Таблица очищена!');
}

// Вызов при открытии настроек
function loadVisualSettings() {
    applyEffectSettings();
    applyUIStyle();
}

// Добавляем применение при изменении
document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("effectType").onchange = applyEffectSettings;
    document.getElementById("customSymbol").oninput = applyEffectSettings;
    document.getElementById("rotateSymbols").onchange = applyEffectSettings;
    document.getElementById("fallingEnabled").onchange = applyEffectSettings;
    document.getElementById("uiStyle").onchange = applyUIStyle;
});
</script>

</body>
</html>
